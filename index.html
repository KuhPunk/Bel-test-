<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>Беларуская Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css" />
    <script defer src="app.js"></script>
  </head>
  <body data-theme="light">
    <header class="app-header">
      <div>
        <p class="app-eyebrow">Telegram Mini App</p>
        <h1>Беларуская практыка</h1>
        <p class="app-subtitle">
          Создавайте и проходите тесты, делитесь правилами и отслеживайте прогресс
        </p>
      </div>
      <div class="header-controls">
        <div class="header-pill">beta</div>
        <button id="themeToggle" class="ghost-btn" type="button" aria-pressed="false">
          Ночная тэма
        </button>
      </div>
    </header>
    <div class="ornament-band" aria-hidden="true"></div>

    <main class="app-shell">
      <nav class="tab-bar" aria-label="Разделы приложения">
        <button class="tab-link active" data-tab="rules">Основные правила</button>
        <button class="tab-link" data-tab="create">Создание теста</button>
        <button class="tab-link" data-tab="user-tests">Пользовательские тесты</button>
        <button class="tab-link" data-tab="stats">Статистика</button>
        <button class="tab-link" data-tab="achievements">Достижения</button>
      </nav>

      <section class="tab-panel active" id="rules" role="tabpanel">
        <header class="panel-header">
          <div>
            <h2>Основные правила</h2>
            <p id="rulesSubtitle">Систематизированная справка + пользовательские дополнения</p>
          </div>
        </header>
        <div class="rule-tabs" id="ruleTabs" role="tablist"></div>
        <div id="rulesList" class="card-grid"></div>

        <form id="ruleForm" class="card form-card">
          <h3>Добавить своё правило</h3>
          <label class="form-field">
            <span>Заголовок</span>
            <input type="text" id="ruleTitle" required />
          </label>
          <label class="form-field">
            <span>Описание</span>
            <textarea id="ruleBody" rows="4" required></textarea>
          </label>
          <label class="form-field">
            <span>Категория</span>
            <select id="ruleCategorySelect"></select>
          </label>
          <label class="form-field">
            <span>Категория</span>
            <select id="ruleCategorySelect"></select>
          </label>
          <label class="form-field">
            <span>Своя категория</span>
            <div class="input-row">
              <input type="text" id="ruleCategoryNew" placeholder="Например, Дыялекты" />
              <button type="button" class="secondary-btn" id="createCategoryBtn">
                Создать
              </button>
            </div>
            <p class="field-hint">Укажите название и нажмите «Создать», чтобы добавить вкладку</p>
          </label>
          <button type="submit" class="primary-btn">Сохранить правило</button>
        </form>
      </section>

      <section class="tab-panel" id="create" role="tabpanel">
        <header class="panel-header">
          <div>
            <h2>Конструктор тестов</h2>
            <p>Соберите тест и поделитесь им с друзьями</p>
          </div>
        </header>

        <form id="testMetaForm" class="card form-card">
          <h3>Данные теста</h3>
          <label class="form-field">
            <span>Ник автора</span>
            <input type="text" id="authorNick" required />
          </label>
          <label class="form-field">
            <span>Название теста</span>
            <input type="text" id="testTitle" required />
          </label>
          <label class="form-field">
            <span>Короткое описание</span>
            <textarea id="testDescription" rows="2" placeholder="Необязательно"></textarea>
          </label>
        </form>

        <form id="questionForm" class="card form-card">
          <h3>Добавить вопрос</h3>
          <label class="form-field">
            <span>Формулировка вопроса</span>
            <textarea id="questionText" rows="2" required></textarea>
          </label>
          <label class="form-field">
            <span>Правильный ответ</span>
            <input type="text" id="correctAnswer" required />
          </label>
          <label class="form-field">
            <span>Неправильные ответы (через запятую)</span>
            <input
              type="text"
              id="wrongAnswers"
              placeholder="мина, мяжа, мова"
              required
            />
          </label>
          <button type="submit" class="secondary-btn">Добавить вопрос</button>
        </form>

        <section class="card draft-card">
          <div class="draft-head">
            <h3>Черновик теста</h3>
            <p>
              Вопросы: <span id="draftCount">0</span> • Последнее обновление:
              <span id="draftUpdated">—</span>
            </p>
          </div>
          <ol id="draftQuestions" class="draft-list"></ol>
          <button id="saveTestBtn" class="primary-btn" disabled>
            Опубликовать тест
          </button>
        </section>
      </section>

      <section class="tab-panel" id="user-tests" role="tabpanel">
        <header class="panel-header">
          <div>
            <h2>Пользовательские тесты</h2>
            <p>Дата создания и автор указаны в карточке</p>
          </div>
        </header>
        <div id="testsList" class="card-grid"></div>
        <div id="testPlayer" class="card test-player hidden"></div>
      </section>

      <section class="tab-panel" id="stats" role="tabpanel">
        <header class="panel-header">
          <div>
            <h2>Статистика</h2>
            <p>История прохождений пользовательских тестов</p>
          </div>
        </header>
        <div id="statsList" class="stats-list"></div>
      </section>

      <section class="tab-panel" id="achievements" role="tabpanel">
        <header class="panel-header">
          <div>
            <h2>Достижения</h2>
            <p>Открывайте значки, выполняя действия в приложении</p>
          </div>
        </header>
        <div id="achievementsList" class="achievements-list"></div>
      </section>
    </main>

    <div id="toast" role="status" aria-live="polite"></div>
  </body>
</html>

