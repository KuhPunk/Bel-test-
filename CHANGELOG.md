# Changelog - Система регистрации

## Добавленный функционал

### ✅ Система аутентификации и регистрации

#### Три типа пользователей:

1. **Ученик (Student)**
   - Простая регистрация без пароля
   - Поля: Имя, Фамилия, Номер группы
   - Автоматическое сохранение результатов тестов
   - Имя автоматически подставляется при прохождении тестов

2. **Учитель (Teacher)**
   - Регистрация с логином и паролем
   - Может создавать тесты и правила
   - Видит результаты всех учеников
   - Результаты сгруппированы по группам

3. **Администратор (Admin)**
   - Вход через секретный ключ: `belarus_admin_2024`
   - Панель управления пользователями
   - Просмотр всех учителей с паролями
   - Просмотр всех учеников с результатами
   - Возможность удаления пользователей

### ✅ Новые UI компоненты

- Экран входа/регистрации
- Переключение между вкладками "Вход" и "Регистрация"
- Динамические поля в зависимости от выбранной роли
- Модальное окно для входа администратора
- Кнопка "Выйти" в шапке приложения
- Панель администратора с управлением пользователями
- Панель учителя с результатами учеников по группам

### ✅ Хранение данных

Новые ключи в localStorage:
- `bel-mini-users` - список всех пользователей
- `bel-mini-auth` - текущая сессия пользователя

### ✅ Логика работы

1. **При загрузке приложения:**
   - Проверяется наличие сохранённой сессии
   - Если сессия есть - автоматический вход
   - Если нет - показывается экран входа/регистрации

2. **При регистрации:**
   - Данные сохраняются в `bel-mini-users`
   - Создаётся сессия в `bel-mini-auth`
   - Автоматический вход в приложение

3. **При входе:**
   - Проверка логина/пароля для учителей
   - Проверка секретного ключа для администратора
   - Создание сессии

4. **При выходе:**
   - Очистка сессии из `bel-mini-auth`
   - Возврат на экран входа

5. **При прохождении теста (ученик):**
   - Результат сохраняется в профиле ученика
   - Обновляется общий список пользователей
   - Учитель может видеть эти результаты

## Сохранённый функционал

Весь предыдущий функционал работает без изменений:

- ✅ Просмотр и создание правил
- ✅ Создание пользовательских категорий
- ✅ Конструктор тестов
- ✅ Прохождение тестов
- ✅ Статистика
- ✅ Система достижений
- ✅ Тёмная/светлая тема
- ✅ Интеграция с Telegram Mini App

## Технические детали

### Структура пользователя (Ученик):
```javascript
{
  id: "uuid",
  role: "student",
  firstName: "Іван",
  lastName: "Петраў",
  group: "101",
  createdAt: 1234567890,
  results: [
    {
      testId: "test-uuid",
      testTitle: "Название теста",
      score: 8,
      total: 10,
      percent: 80,
      date: 1234567890
    }
  ]
}
```

### Структура пользователя (Учитель):
```javascript
{
  id: "uuid",
  role: "teacher",
  username: "teacher1",
  password: "password123",
  createdAt: 1234567890
}
```

### Структура пользователя (Администратор):
```javascript
{
  id: "admin",
  role: "admin",
  username: "admin",
  isAdmin: true
}
```

## Файлы

- `app.js` - основная логика приложения с системой регистрации
- `index.html` - HTML с формами входа/регистрации
- `styles.css` - стили для новых компонентов
- `clear-data.html` - утилита для очистки данных при тестировании
- `README.md` - документация
- `test-guide.md` - руководство по тестированию
- `CHANGELOG.md` - этот файл

## Как использовать

1. Откройте `index.html` в браузере
2. Зарегистрируйтесь как ученик, учитель или войдите как администратор
3. Используйте все функции приложения
4. Для очистки данных откройте `clear-data.html`

## Секретный ключ администратора

```
belarus_admin_2024
```

Храните его в безопасности!
